---
layout: post
title: “vimrc 파일실행시 ^M 에러 발생할 경우”
date: 2021-11-15 18:05:00 +0530
categories: vim vimrc badinterpreter 개행문자오류
tag: error linux
---

로컬인 맥에서 vim을 사용하다가 Github 브로그를 만들기 위해 AWS에 우분투 서버 세팅 후
로컬과 같은 환경을 만들기 위해 .vimrc파일을 ftp로 옮겼는데 플러그인 설치를 실행시키면 계속 오류가 났다.

오류를 확인해보니 해당 문구가 나왔다.
```
^M: bad interpreter: No such file or directory
```

??? 해당 문자를 적은적도 없고 처음 보거니와 vi 에서 확인했을때는 없었는데 어디있단 말인가?
일단 왠지 맥에서 리눅스로 가면서 개행문자가 들어간것 같아 일단 엔터가 들어간 부분은 없앴다.
하지만 그래도 동일한 오류가 발생했다.  

그래서 구글링을 해본결과 개행 문자를 보기 위해서는 그냥 vi를 실행 시키는게 아니였다.
**-b** 옵션이 필요했다.

```
vim -b <file>
```
로 파일을 열어보니 문장 끝마다 ^M이 붙어 있는것을 확인했다.
예상대로 맥에서 생성되 파일에서 개행마다 carriage return charater인 **^M** 이 붙어서 리눅스에서 실행 시 에러를 낸거였다.
추가적으로 운영체제별 개행문자는
- 윈도우: CRLF(\r\n)
- 유닉스: LF(\n)
- 맥: CR(\r)

이라고 한다.

또 추가적으로 개행문자는 컴퓨터에서 줄바꿈을 나타내는 제어문자인데
여기서 
- LF(Line Feed): 커서를 한칸 아래로 이동하여 새로운 라인을추가 (아스키 코드: 10)
- CR(Carrige Return): 커서를 맨왼쪽으로 이동 (아스키 코드: 13)

이라고 한다.

암튼 위 오류의 해결책은 vi -b로 진입하여 CR에 해당하는 **^M** 문자를 모두 삭제하거나 리눅스에서 새로 파일을 만들어 작성하여 
실행하면 제대로 동작한다.

vi에서 수정시에는 다음을 이용하여 한번에 지울 수 있다.
```
:%s/^M$//
```

여기서 **^M** 문자는 Ctrl+V, Ctrl+M을 차례로 입력하면 된다.


저 단순한 오류때문에 참 많은걸 알아간다😅
